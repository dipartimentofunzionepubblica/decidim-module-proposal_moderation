$(() => {
  var rootCommentableId = <%== "comments-for-#{@comment.root_commentable.commentable_type.demodulize}-#{@comment.root_commentable.id}".to_json %>;
  var $comments = $("#" + rootCommentableId);
  var config = $comments.data("decidim-comments");

  component = new Decidim.CommentsComponent($comments, config);
  component.unmountComponent();

  var commentId = <%= @comment.id.to_json %>;
  var $comment = $("#comment_<%= @comment.id %>");

  $comment.replaceWith("");

  $comments = $("#" + rootCommentableId);
  $comments.foundation();

  // Re-create the component
  component = new Decidim.CommentsComponent($comments, $comments.data("decidim-comments"));
  component.mountComponent();
  $comments.data("comments", component);
});

<% #Copyright (C) 2022 Formez PA
# This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, version 3.
# This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.
# You should have received a copy of the GNU Affero General Public License along with this program. If not, see <https://www.gnu.org/licenses/>
#
# Rimuove dalla pagina un commento in caso venga rigettato da un admin
%>